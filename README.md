# NICE POS - í†µí•© ê²°ì œ ì‹œìŠ¤í…œ POC

ì›¹ê³¼ ì•±ì„ ëª¨ë‘ ì§€ì›í•˜ëŠ” NICE ê²°ì œ ì‹œìŠ¤í…œ POCì…ë‹ˆë‹¤.

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

- **ğŸ’³ ì¹´ë“œ ê²°ì œ**: ì‹ ìš©/ì²´í¬ì¹´ë“œ ê²°ì œ ìŠ¹ì¸ ë° ì·¨ì†Œ
- **ğŸ“± QR ê²°ì œ**: ì œë¡œí˜ì´, ì¹´ì¹´ì˜¤í˜ì´, ë„¤ì´ë²„í˜ì´, ì‚¼ì„±í˜ì´
- **ğŸ§¾ í˜„ê¸ˆì˜ìˆ˜ì¦**: ê°œì¸ ì†Œë“ê³µì œ ë° ì‚¬ì—…ì ì§€ì¶œì¦ë¹™
- **ğŸ“‹ ê²°ì œ ë‚´ì—­**: ê±°ë˜ ë‚´ì—­ ì¡°íšŒ ë° ê´€ë¦¬

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ì›¹ (Next.js)                      â”‚
â”‚            ì•± (React Native)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚ HTTP/REST API
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Next.js API Routes                    â”‚
â”‚  /api/payment/card                          â”‚
â”‚  /api/payment/qr                            â”‚
â”‚  /api/payment/cashreceipt                   â”‚
â”‚  /api/payment/history                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         NICE API Client                      â”‚
â”‚  (ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ / ì‹¤ì œ API)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì™œ ì´ êµ¬ì¡°ì¸ê°€?

1. **Next.js API Routes**: í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œê°€ í•˜ë‚˜ì˜ í”„ë¡œì íŠ¸ì—ì„œ ë™ì‘
2. **ê³µí†µ íƒ€ì… ì •ì˜**: TypeScriptë¡œ íƒ€ì… ì•ˆì •ì„± ë³´ì¥
3. **ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ**: ì‹¤ì œ NICE API ì—†ì´ë„ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
4. **í™•ì¥ ê°€ëŠ¥**: RESTful API êµ¬ì¡°ë¡œ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥

## ğŸš€ ì‹œì‘í•˜ê¸°

### 1. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
npm install
```

### 2. ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
npm run dev
```

ë¸Œë¼ìš°ì €ì—ì„œ [http://localhost:3000](http://localhost:3000) ì ‘ì†

### 3. ë¹Œë“œ ë° ë°°í¬

```bash
npm run build
npm start
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
nice-pos/
â”œâ”€â”€ app/                      # Next.js App Router
â”‚   â”œâ”€â”€ api/                 # API Routes (ë°±ì—”ë“œ)
â”‚   â”‚   â””â”€â”€ payment/
â”‚   â”‚       â”œâ”€â”€ card/        # ì¹´ë“œ ê²°ì œ API
â”‚   â”‚       â”œâ”€â”€ qr/          # QR ê²°ì œ API
â”‚   â”‚       â”œâ”€â”€ cashreceipt/ # í˜„ê¸ˆì˜ìˆ˜ì¦ API
â”‚   â”‚       â””â”€â”€ history/     # ê²°ì œ ë‚´ì—­ API
â”‚   â”œâ”€â”€ layout.tsx           # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ page.tsx             # ë©”ì¸ í˜ì´ì§€
â”‚   â””â”€â”€ globals.css          # ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼
â”‚
â”œâ”€â”€ components/               # React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ PaymentCard.tsx      # ì¹´ë“œ ê²°ì œ UI
â”‚   â”œâ”€â”€ PaymentQR.tsx        # QR ê²°ì œ UI
â”‚   â”œâ”€â”€ CashReceipt.tsx      # í˜„ê¸ˆì˜ìˆ˜ì¦ UI
â”‚   â””â”€â”€ PaymentHistory.tsx   # ê²°ì œ ë‚´ì—­ UI
â”‚
â”œâ”€â”€ lib/                     # ë¼ì´ë¸ŒëŸ¬ë¦¬
â”‚   â”œâ”€â”€ nice-api.ts          # NICE API í´ë¼ì´ì–¸íŠ¸
â”‚   â””â”€â”€ utils.ts             # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚
â””â”€â”€ types/                   # TypeScript íƒ€ì…
    â””â”€â”€ payment.ts           # ê²°ì œ ê´€ë ¨ íƒ€ì…
```

## ğŸ”„ ê²°ì œ íë¦„

### 1. ì¹´ë“œ ê²°ì œ íë¦„

```mermaid
sequenceDiagram
    participant User as ì‚¬ìš©ì
    participant Web as ì›¹/ì•±
    participant API as API Routes
    participant NICE as NICE API

    User->>Web: ì¹´ë“œ ì •ë³´ ì…ë ¥
    Web->>API: POST /api/payment/card
    API->>NICE: ê²°ì œ ìŠ¹ì¸ ìš”ì²­
    NICE-->>API: ìŠ¹ì¸ ê²°ê³¼
    API-->>Web: ê²°ì œ ì‘ë‹µ
    Web-->>User: ê²°ê³¼ í‘œì‹œ
```

**ìƒì„¸ ë‹¨ê³„:**

1. ì‚¬ìš©ìê°€ ì¹´ë“œ ì •ë³´ ì…ë ¥ (ì¹´ë“œë²ˆí˜¸, ìœ íš¨ê¸°ê°„, í• ë¶€ê°œì›” ë“±)
2. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ `/api/payment/card`ë¡œ POST ìš”ì²­
3. API Routesì—ì„œ ì…ë ¥ ê²€ì¦
4. NICE API í´ë¼ì´ì–¸íŠ¸ í˜¸ì¶œ (ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œì—ì„œëŠ” Mock ì‘ë‹µ)
5. ê±°ë˜ ID, ìŠ¹ì¸ ë²ˆí˜¸ ìƒì„±
6. ê²°ê³¼ë¥¼ í”„ë¡ íŠ¸ì—”ë“œë¡œ ë°˜í™˜
7. ì‚¬ìš©ìì—ê²Œ ê²°ê³¼ í‘œì‹œ

### 2. QR ê²°ì œ íë¦„

```mermaid
sequenceDiagram
    participant User as ì‚¬ìš©ì
    participant Web as ì›¹/ì•±
    participant API as API Routes
    participant QR as QR ì„œë¹„ìŠ¤

    User->>Web: QR ê²°ì œ ì„ íƒ
    Web->>API: POST /api/payment/qr
    API->>QR: QR ì½”ë“œ ìƒì„± ìš”ì²­
    QR-->>User: QR ì½”ë“œ í‘œì‹œ
    User->>QR: QR ìŠ¤ìº” ë° ê²°ì œ
    QR-->>API: ê²°ì œ ì™„ë£Œ ì½œë°±
    API-->>Web: ê²°ê³¼ ì•Œë¦¼
    Web-->>User: ê²°ê³¼ í‘œì‹œ
```

### 3. í˜„ê¸ˆì˜ìˆ˜ì¦ ë°œí–‰ íë¦„

1. ì‚¬ìš©ìê°€ ê¸ˆì•¡ê³¼ ì‹ë³„ ì •ë³´ ì…ë ¥ (íœ´ëŒ€í° ë²ˆí˜¸ ë˜ëŠ” ì‚¬ì—…ìë²ˆí˜¸)
2. `/api/payment/cashreceipt`ë¡œ POST ìš”ì²­
3. ì˜ìˆ˜ì¦ íƒ€ì… ê²€ì¦ (ê°œì¸/ì‚¬ì—…ì)
4. NICE APIë¥¼ í†µí•´ êµ­ì„¸ì²­ ì „ì†¡
5. ìŠ¹ì¸ ë²ˆí˜¸ ë°œê¸‰
6. ì‚¬ìš©ìì—ê²Œ ì˜ìˆ˜ì¦ URL ì œê³µ



## ğŸ”Œ API ë¬¸ì„œ

### POST /api/payment/card

ì¹´ë“œ ê²°ì œ ìŠ¹ì¸

**Request:**
```json
{
  "amount": 10000,
  "cardNumber": "1234-5678-9012-3456",
  "expiryMonth": "12",
  "expiryYear": "25",
  "installment": 0,
  "orderName": "ì»¤í”¼ 2ì”",
  "customerName": "í™ê¸¸ë™"
}
```

**Response:**
```json
{
  "success": true,
  "transactionId": "TXN1234567890abcdef",
  "approvalNumber": "12345678",
  "approvedAt": "2024-01-01T12:00:00Z",
  "amount": 10000,
  "method": "CARD",
  "status": "APPROVED",
  "message": "ê²°ì œê°€ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "receiptUrl": "/receipt/TXN1234567890abcdef"
}
```

### POST /api/payment/qr

QR ê²°ì œ ìŠ¹ì¸

**Request:**
```json
{
  "amount": 10000,
  "qrType": "KAKAO_PAY",
  "orderName": "ì»¤í”¼ 2ì”",
  "customerPhone": "010-1234-5678"
}
```

**Response:**
```json
{
  "success": true,
  "transactionId": "TXN1234567890abcdef",
  "approvalNumber": "12345678",
  "approvedAt": "2024-01-01T12:00:00Z",
  "amount": 10000,
  "method": "QR",
  "status": "APPROVED",
  "message": "KAKAO_PAY ê²°ì œê°€ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "receiptUrl": "/receipt/TXN1234567890abcdef"
}
```

### POST /api/payment/cashreceipt

í˜„ê¸ˆì˜ìˆ˜ì¦ ë°œí–‰

**Request:**
```json
{
  "amount": 10000,
  "receiptType": "PERSONAL",
  "phoneNumber": "010-1234-5678",
  "orderName": "ì»¤í”¼ 2ì”"
}
```

**Response:**
```json
{
  "success": true,
  "transactionId": "TXN1234567890abcdef",
  "approvalNumber": "12345678",
  "approvedAt": "2024-01-01T12:00:00Z",
  "amount": 10000,
  "method": "CASH_RECEIPT",
  "status": "APPROVED",
  "message": "í˜„ê¸ˆì˜ìˆ˜ì¦ì´ ë°œí–‰ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "receiptUrl": "/receipt/TXN1234567890abcdef"
}
```

### DELETE /api/payment/card

ì¹´ë“œ ê²°ì œ ì·¨ì†Œ

**Request:**
```json
{
  "transactionId": "TXN1234567890abcdef",
  "cancelAmount": 10000,
  "cancelReason": "ê³ ê° ìš”ì²­"
}
```

**Response:**
```json
{
  "success": true,
  "transactionId": "TXN1234567890abcdef",
  "amount": 10000,
  "method": "CARD",
  "status": "CANCELLED",
  "message": "ê²°ì œê°€ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

### GET /api/payment/history

ê²°ì œ ë‚´ì—­ ì¡°íšŒ

**Query Parameters:**
- `page`: í˜ì´ì§€ ë²ˆí˜¸ (ê¸°ë³¸ê°’: 1)
- `limit`: í˜ì´ì§€ë‹¹ í•­ëª© ìˆ˜ (ê¸°ë³¸ê°’: 10)
- `method`: ê²°ì œ ë°©ë²• (CARD, QR, CASH_RECEIPT)
- `status`: ê²°ì œ ìƒíƒœ (PENDING, APPROVED, CANCELLED, FAILED)
- `startDate`: ì‹œì‘ì¼ (YYYY-MM-DD)
- `endDate`: ì¢…ë£Œì¼ (YYYY-MM-DD)

**Response:**
```json
{
  "success": true,
  "items": [
    {
      "transactionId": "TXN1234567890abcdef",
      "approvalNumber": "12345678",
      "amount": 10000,
      "method": "CARD",
      "status": "APPROVED",
      "orderName": "ì»¤í”¼ 2ì”",
      "customerName": "í™ê¸¸ë™",
      "createdAt": "2024-01-01T12:00:00Z"
    }
  ],
  "total": 100,
  "page": 1,
  "limit": 10
}
```

## ğŸ§ª í…ŒìŠ¤íŠ¸

### ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ í…ŒìŠ¤íŠ¸

í˜„ì¬ëŠ” ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œë¡œ ë™ì‘í•©ë‹ˆë‹¤:

- ì¹´ë“œë²ˆí˜¸ 15ìë¦¬ ì´ìƒ: ìŠ¹ì¸
- ì¹´ë“œë²ˆí˜¸ 15ìë¦¬ ë¯¸ë§Œ: ê±°ë¶€
- ëª¨ë“  QR ê²°ì œ: 2ì´ˆ í›„ ìë™ ìŠ¹ì¸
- í˜„ê¸ˆì˜ìˆ˜ì¦: 1ì´ˆ í›„ ìë™ ë°œí–‰

### ì‹¤ì œ NICE API ì—°ë™

1. `.env.local` íŒŒì¼ ìƒì„±:
```bash
NICE_SIMULATION_MODE=false
NICE_CLIENT_ID=your_client_id
NICE_SECRET_KEY=your_secret_key
NICE_API_URL=https://api.nicepay.co.kr
```

2. `lib/nice-api.ts`ì—ì„œ ì‹¤ì œ API í˜¸ì¶œ êµ¬í˜„

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **ì¹´ë“œ ì •ë³´ ì•”í˜¸í™”**: ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ì¹´ë“œ ì •ë³´ë¥¼ ì•”í˜¸í™”í•˜ì—¬ ì „ì†¡
2. **HTTPS í•„ìˆ˜**: í”„ë¡œë•ì…˜ì—ì„œëŠ” ë°˜ë“œì‹œ HTTPS ì‚¬ìš©
3. **í† í° ì¸ì¦**: API í˜¸ì¶œ ì‹œ JWT ë“±ì˜ ì¸ì¦ í† í° ì‚¬ìš©
4. **PCI DSS ì¤€ìˆ˜**: ì¹´ë“œ ì •ë³´ ì²˜ë¦¬ ì‹œ PCI DSS ê·œì • ì¤€ìˆ˜
5. **ë¯¼ê° ì •ë³´ ë¡œê¹… ê¸ˆì§€**: ì¹´ë“œ ë²ˆí˜¸, CVV ë“±ì€ ë¡œê·¸ì— ë‚¨ê¸°ì§€ ì•ŠìŒ

## ğŸ“ˆ ë‹¤ìŒ ë‹¨ê³„

### í”„ë¡œë•ì…˜ ì¤€ë¹„

- [ ] ì‹¤ì œ NICE API ì—°ë™
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ (PostgreSQL, MySQL ë“±)
- [ ] ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ (JWT, OAuth)
- [ ] ê²°ì œ ì‹¤íŒ¨ ì¬ì‹œë„ ë¡œì§
- [ ] ì›¹í›… ì²˜ë¦¬ (ê²°ì œ ìƒíƒœ ë³€ê²½ ì•Œë¦¼)
- [ ] ì—ëŸ¬ ëª¨ë‹ˆí„°ë§ (Sentry ë“±)
- [ ] ë¡œê¹… ì‹œìŠ¤í…œ

### ê¸°ëŠ¥ í™•ì¥

- [ ] ë¶€ë¶„ ì·¨ì†Œ ê¸°ëŠ¥
- [ ] ì •ê¸° ê²°ì œ (êµ¬ë…)
- [ ] í™˜ë¶ˆ ì²˜ë¦¬
- [ ] ê²°ì œ ì˜ìˆ˜ì¦ PDF ìƒì„±
- [ ] ëŒ€ì‹œë³´ë“œ ë° í†µê³„
- [ ] ì •ì‚° ê´€ë¦¬



## ğŸ“ ë¬¸ì˜

í”„ë¡œì íŠ¸ì— ëŒ€í•œ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì´ìŠˆë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”.

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ISC
